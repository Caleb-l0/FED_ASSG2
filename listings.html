<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accessories - EasyElectronics</title>
    <link rel="stylesheet" href="style.css">
    <script src="js/login.js" defer></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            fetch('header.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('header-container').innerHTML = data;
                });

            const addButton = document.getElementById('add-item-btn');
            addButton.addEventListener('click', function() {
                const itemName = prompt('Enter item name:');
                const itemPrice = prompt('Enter item price:');
                const itemImage = prompt('Enter item image URL:');
                
                if(itemName && itemPrice && itemImage) {
                    const newItem = createItemCard(itemName, itemPrice, itemImage);
                    document.getElementById('item-list').appendChild(newItem);
                } else {
                    alert('All fields are required!');
                }
            });
        });

        let totalCost = 0;

        function handleBuyNow(productName, productPrice) {
            totalCost += parseFloat(productPrice);
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            cart.push({ name: productName, price: parseFloat(productPrice) });
            localStorage.setItem('cart', JSON.stringify(cart));
            alert("You have added " + productName + " to your cart. Total cost: $" + totalCost.toFixed(2));
        }

        function createItemCard(name, price, image) {
            const itemCard = document.createElement('div');
            itemCard.classList.add('product-card');
            
            const itemImage = document.createElement('img');
            itemImage.src = image;
            itemImage.alt = name;
            
            const itemName = document.createElement('h3');
            itemName.textContent = name;
            
            const itemPrice = document.createElement('p');
            itemPrice.classList.add('price');
            itemPrice.textContent = `$${price}`;

            const buyNowButton = document.createElement('button');
            buyNowButton.classList.add('buy-now-btn');  
            buyNowButton.textContent = 'Buy Now';
            buyNowButton.addEventListener('click', function() {
                handleBuyNow(name, price);
            });

            itemCard.appendChild(itemImage);
            itemCard.appendChild(itemName);
            itemCard.appendChild(itemPrice);
            itemCard.appendChild(buyNowButton);

            return itemCard;
        }
    </script>
</head>
<body>
    <div id="header-container"></div>

    <section id="item-list" class="product-grid">
        <div class="product-card">
            <img src="https://example.com/item1.jpg" alt="Item 1">
            <h3>Item 1</h3>
            <p class="price">$100</p>
            <button class="buy-now-btn" onclick="handleBuyNow('Item 1', 100)">Buy Now</button>
        </div>
        <div class="product-card">
            <img src="https://example.com/item2.jpg" alt="Item 2">
            <h3>Item 2</h3>
            <p class="price">$200</p>
            <button class="buy-now-btn" onclick="handleBuyNow('Item 2', 200)">Buy Now</button>
        </div>
        <div class="product-card">
            <img src="https://example.com/item3.jpg" alt="Item 3">
            <h3>Item 3</h3>
            <p class="price">$300</p>
            <button class="buy-now-btn" onclick="handleBuyNow('Item 3', 300)">Buy Now</button>
        </div>
    </section>

    <button id="add-item-btn" style="position: fixed; bottom: 20px; right: 20px; padding: 10px 20px; background-color: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer;">
        Add Item
    </button>
</body>
</html>

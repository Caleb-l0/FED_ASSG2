<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Devices - EasyElectronics</title>
    <link rel="stylesheet" href="style.css">
    <script src="js/login.js" defer></script>
</head>
<body>
    <div id="loginModal" class="modal" style="display: none;">
        <div class="modal-content" id="modal-content">
            <span class="close" onclick="closeLoginModal()">&times;</span>
            <h2>Please Log In</h2>
            <form onsubmit="handleLogin(event)" class="modal-form">
                <input type="text" id="username" placeholder="Username" required>
                <input type="password" id="password" placeholder="Password" required>
                <button type="submit" class="modal-button">Log In</button>
            </form>
            <p>or</p>
            <button class="modal-button" onclick="browseAsGuest(event)">Browse as Guest</button>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            fetch('header.html')
                .then(response => response.text())
                .then(data => {
                    document.body.insertAdjacentHTML('afterbegin', data);
                    updateLoginState(); 
                });
        });

        function updateLoginState() {
            const loggedInUser = localStorage.getItem('loggedInUser');
            const loginLink = document.getElementById('login-link'); 
            const logo = document.getElementById('logo'); 
            const modal = document.getElementById("loginModal");

            modal.style.display = 'none';

            if (loggedInUser) {
                modal.style.display = 'none'; 

                if (loggedInUser === 'Guest') {
                    loginLink.innerHTML = 'Login'; 
                    loginLink.onclick = showLoginModal; 
                } else {
                    loginLink.innerHTML = loggedInUser; 
                    loginLink.style.fontFamily = 'inherit'; 
                    loginLink.style.fontSize = '16px';
                    loginLink.onclick = handleLogout; 
                }
                logo.style.display = 'none'; 
            } else {
                logo.style.display = 'block'; 
                loginLink.innerHTML = 'Login';
                loginLink.onclick = showLoginModal; 
                
                if (!localStorage.getItem('hasGuestVisited') && !loggedInUser) {
                    showLoginModal(); 
                }
            }
        }
        function showLoginModal() {
            const modal = document.getElementById("loginModal");
            modal.style.display = "flex"; 
        }
        function closeLoginModal() {
            const modal = document.getElementById("loginModal");
            modal.style.display = "none"; 
        }

        function handleLogin(event) {
            event.preventDefault();
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();

            if (username && password) {
                localStorage.setItem('loggedInUser', username); 
                closeLoginModal(); 
                updateLoginState(); 
            } else {
                alert("Please enter a valid username and password.");
            }
        }

        function browseAsGuest(event) {
            event.preventDefault(); 
            localStorage.setItem('loggedInUser', 'Guest');
            localStorage.setItem('hasGuestVisited', true); 
            closeLoginModal(); 
            updateLoginState();
        }

        function handleLogout() {
            localStorage.removeItem('loggedInUser'); 
            localStorage.removeItem('hasGuestVisited'); 
            window.location.reload(); 
        }
        function handleBuyNow(productName, productPrice) {
            alert("You have selected: " + productName + " for $" + productPrice);}

        let totalCost = 0;

        function handleBuyNow(productName, productCost) {
    totalCost += productCost;

    const cart = JSON.parse(localStorage.getItem('cart')) || [];

    cart.push({ name: productName, price: productCost });

    localStorage.setItem('cart', JSON.stringify(cart));

    alert("You have added " + productName + " to your cart. Total cost: $" + totalCost);
}
    </script>

    <section class="devices-hero">
        <h1>Devices</h1>
        <p>Find the latest smartphones, laptops, tablets, and more.</p>
    </section>

    <section class="featured-items">
        <h2 id="smartphones">Smartphones</h2>
            <div class="product-grid">
                <div class="product-card">
                    <img src="https://encrypted-tbn2.gstatic.com/shopping?q=tbn:ANd9GcQG5FjuPT94-O4VN4_Nh6iU0hgISCq-u_m30XndyIGrA5b5WHHYEKdX6VTUtD8kOoxwfZteBpLCzsXI6t0OiRmmSiDGx44SRfOTGhHTXQo3g0N05sJ5gEoU6Q&usqp=CAE" alt="Smartphone">
                    <h3>iPhone 12</h3>
                    <p class="price">$628</p>
                    <a href="javascript:void(0);" class="buy-now-btn" onclick="handleBuyNow('iPhone 12', 628)">Buy Now</a>
                </div>
                <div class="product-card">
                    <img src="https://encrypted-tbn0.gstatic.com/shopping?q=tbn:ANd9GcSrmCuSj74I0nvluzl9cSRevo03mBKU5DKNHEsGcP7AcAhIVlYbmwcQFqwFxM9cOrcPzzKlkGfaiROZ53otO-x-aQKKxFQwGGtWckgnqXWtXeTJjZxHkWUG3w&usqp=CAE" alt="Smartphone">
                    <h3>Samsung A55</h3>
                    <p class="price">$388</p>
                    <a href="javascript:void(0);" class="buy-now-btn" onclick="handleBuyNow('Samsung A55', 388)">Buy Now</a>
                </div>
                <div class="product-card">
                    <img src="https://encrypted-tbn0.gstatic.com/shopping?q=tbn:ANd9GcTBtIWvOhMFJw4SZ96DM0FGcF6aqhPR2einQMJejoQeSMEsOIyuAruJ4oOlaKT1QbcKi4nRdQZdCQbSRWBVNqru9nIqsm4cQg&usqp=CAE" alt="Smartphone">
                    <h3>Oppo A3x</h3>
                    <p class="price">$189</p>
                    <a href="javascript:void(0);" class="buy-now-btn" onclick="handleBuyNow('Oppo A3x', 189)">Buy Now</a>
                </div>
                <div class="product-card">
                    <img src="https://encrypted-tbn1.gstatic.com/shopping?q=tbn:ANd9GcTgoW5zmi7GSYzJ3qZQSyK6dm_RXIE_BwdUjM8Uc9d9Xs3z9WKZzZMsXeovm4SOgol_xnyixCH1cIr08uZJSr-qIucIrIpQ&usqp=CAE" alt="Smartphone">
                    <h3>Xiao Mi Snapdragon 730</h3>
                    <p class="price">$261</p>
                    <a href="javascript:void(0);" class="buy-now-btn" onclick="handleBuyNow('Xiao Mi Snapdragon 730', 261)">Buy Now</a>
                </div>
            </div>

            <h2 id="laptops">Laptops</h2>
            <div class="product-grid">  
                <div class="product-card">
                    <img src="https://www.courts.com.sg/media/catalog/product/i/p/ip164241_00.jpg?quality=80&bg-color=255,255,255&fit=bounds&height=770&width=770&canvas=770:770" alt="Laptop">
                    <h3>Macbook Pro 13</h3>
                    <p class="price">$2007</p>
                    <a href="javascript:void(0);" class="buy-now-btn" onclick="handleBuyNow('Macbook Pro 13', 2007)">Buy Now</a>
                </div>
                <div class="product-card">
                    <img src="https://p3-ofp.static.pub//fes/cms/2024/05/28/xe4qekn8plqz1bg16lw47yx882ggav850740.png" alt="Laptop">
                    <h3>Lenovo Legion 7i</h3>
                    <p class="price">$1465</p>
                    <a href="javascript:void(0);" class="buy-now-btn" onclick="handleBuyNow('Lenovo Legion 7i', 1465)">Buy Now</a>
                </div>
                <div class="product-card">
                    <img src="https://media.extra.com/i/aurora/100343481_100_01?fmt=auto&w=850" alt="Laptop">
                    <h3>ACER Aspire 5</h3>
                    <p class="price">$575</p>
                    <a href="javascript:void(0);" class="buy-now-btn" onclick="handleBuyNow('ACER Aspire 5', 575)">Buy Now</a>
                </div>
                <div class="product-card">
                    <img src="https://m.media-amazon.com/images/I/71-4taykpML._AC_SX679_.jpg" alt="Laptop">
                    <h3>ASUS Chromebook CX1</h3>
                    <p class="price">$450</p>
                    <a href="javascript:void(0);" class="buy-now-btn" onclick="handleBuyNow('ASUS Chromebook CX1', 450)">Buy Now</a>
                </div>
            </div>

            <h2 id="tablets">Tablets</h2>
            <div class="product-grid">
                <div class="product-card">
                    <img src="https://www.mistermobile.com.sg/wp-content/uploads/2024/05/Screenshot_2024-05-10_at_10.03.17_AM-removebg-preview.png" alt="Tablet">
                    <h3>iPad Pro 12.9-inch</h3>
                    <p class="price">$399</p>
                    <a href="javascript:void(0);" class="buy-now-btn" onclick="handleBuyNow('iPad Pro 12.9-inch', 399)">Buy Now</a>
                </div>
                <div class="product-card">
                    <img src="https://m.media-amazon.com/images/I/415G0bg-hiL._AC_SX679_.jpg" alt="Tablet">
                    <h3>SAMSUNG Galaxy Tab S6</h3>
                    <p class="price">$499</p>
                    <a href="javascript:void(0);" class="buy-now-btn" onclick="handleBuyNow('SAMSUNG Galaxy Tab S6', 499)">Buy Now</a>
                </div>
                <div class="product-card">
                    <img src="https://i5.walmartimages.com/seo/Lenovo-Tab-M10-Plus-3rd-Gen-10-Tablet-64GB-Storage-4GB-Memory-Android-12-FHD-Display_6d20d86e-e339-4dea-a97d-788dbf71f08c.50da7e377a5410315db7b2430fc13a86.png" alt="Tablet">
                    <h3>Lenovo Tab M10</h3>
                    <p class="price">$549</p>
                    <a href="javascript:void(0);" class="buy-now-btn" onclick="handleBuyNow('Lenovo Tab M10', 549)">Buy Now</a>
                </div>
                <div class="product-card">
                    <img src="https://p1-ofp.static.pub//fes/cms/2024/05/23/tx7m69uvnyyk874b94qxypttfksjp6314614.png" alt="Tablet">
                    <h3>Lenovo Tab P12</h3>
                    <p class="price">$450</p>
                    <a href="javascript:void(0);" class="buy-now-btn" onclick="handleBuyNow('Lenovo Tab P12', 450)">Buy Now</a>
                </div>
            </div>

            <h2 id="other-devices">Other Devices</h2>
            <div class="product-grid">
                <div class="product-card">
                    <img src="https://www.homenoffice.sg//image/cache/catalog/HP%203-in-1%20Monochrome%20LaserJet%20MFP%20M236sdw%20Printer-1-400x400.jpg" alt="Device">
                    <h3>HP M236sdw 3-in-1 Monochrome LaserJet MFP Printer</h3>
                    <p class="price">$299</p>
                    <a href="javascript:void(0);" class="buy-now-btn" onclick="handleBuyNow('HP M236sdw 3-in-1 Monochrome LaserJet MFP Printer', 299)">Buy Now</a>
                </div>
                <div class="product-card">
                    <img src="https://encrypted-tbn1.gstatic.com/shopping?q=tbn:ANd9GcS2ithQclOSDDF94vRSUtzXOFSi7FWYcv63BvlO1t7YlicCv2bSmw_tfDV6R-cFVlL4ck7iuaDtMdCst2nmLcqv8Wtzai8MVPoVA20mvucxm1kpp76bamY5kY4&usqp=CAE" alt="Device">
                    <h3>Canon PIXMA E3370 - A4 All-in-One Inkjet Color Printer</h3>
                    <p class="price">$119</p>
                    <a href="javascript:void(0);" class="buy-now-btn" onclick="handleBuyNow('Canon PIXMA E3370 - A4 All-in-One Inkjet Color Printer', 119)">Buy Now</a>
                </div>
                <div class="product-card">
                    <img src="https://i5.walmartimages.com/seo/SAMSUNG-32-Class-N5300-Series-Full-HD-1080P-LED-Smart-Television-UN32N5300AFXZA_2b2943fd-73d6-4d7b-9c54-e22db0c660f1_4.e79d68ec3a718064170de6cbd82e6030.jpeg" alt="Device">
                    <h3>SAMSUNG 32 Class N5300 Series Full HD Smart TV</h3>
                    <p class="price">$386</p>
                    <a href="javascript:void(0);" class="buy-now-btn" onclick="handleBuyNow('SAMSUNG 32 Class N5300 Series Full HD Smart TV', 386)">Buy Now</a>
                </div>
                <div class="product-card">
                    <img src="https://m.media-amazon.com/images/I/61EwccQmq8L._AC_SX679_.jpg" alt="Device">
                    <h3>PRISM+ Q55-QE | 55" 4K Android TV</h3>
                    <p class="price">$641</p>
                    <a href="javascript:void(0);" class="buy-now-btn" onclick="handleBuyNow('PRISM+ Q55-QE | 55 4K Android TV', 641)">Buy Now</a>
                </div>
            </div>
    <footer>
        <p>&copy; 2024 EasyElectronics</p>
    </footer>
</body>
</html>
